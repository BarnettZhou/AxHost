<!-- 自定义下拉菜单组件 -->
{# 使用方式:
   {% set dropdown_id = 'xxx' %}
   {% set dropdown_placeholder = '请选择' %}
   {% set dropdown_options = [{'value': '1', 'label': '选项1'}, ...] %}
   {% include "components/dropdown.html" %}
   
   JS 调用: initDropdown('xxx', onChangeCallback)
#}

{% set dropdown_id = dropdown_id|default('dropdown') %}
{% set dropdown_placeholder = dropdown_placeholder|default('请选择') %}
{% set dropdown_value = dropdown_value|default('') %}
{% set dropdown_class = dropdown_class|default('') %}

<div class="custom-dropdown relative {{ dropdown_class }}" id="{{ dropdown_id }}_container">
    <button type="button" 
            class="dropdown-trigger w-full h-10 px-3 rounded-lg border border-gray-300 bg-white text-left text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all flex items-center justify-between"
            onclick="toggleDropdownMenu('{{ dropdown_id }}')">
        <span class="dropdown-text text-gray-700">{{ dropdown_placeholder }}</span>
        <svg class="dropdown-arrow w-4 h-4 text-gray-400 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
    </button>
    <input type="hidden" id="{{ dropdown_id }}" value="{{ dropdown_value }}">
    <div class="dropdown-menu absolute z-50 w-full mt-1 bg-white rounded-lg shadow-lg border border-gray-200 py-1 hidden max-h-60 overflow-y-auto">
        {% for option in dropdown_options %}
        <div class="dropdown-option px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors {{ 'bg-orange-50 text-orange-700' if option.value == dropdown_value else '' }}"
             data-value="{{ option.value }}"
             onclick="selectDropdownOption('{{ dropdown_id }}', '{{ option.value }}', '{{ option.label }}')">
            {{ option.label }}
        </div>
        {% endfor %}
    </div>
</div>
